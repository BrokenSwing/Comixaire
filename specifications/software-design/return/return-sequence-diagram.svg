<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="717px" preserveAspectRatio="none" style="width:919px;height:717px;" version="1.1" viewBox="0 0 919 717" width="919px" zoomAndPan="magnify"><defs><filter height="300%" id="f7t77ld0ra1g4" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f7t77ld0ra1g4)" height="286.8047" style="stroke:#A80036;stroke-width:1.0;" width="10" x="757" y="158.8281"/><rect fill="#FFFFFF" filter="url(#f7t77ld0ra1g4)" height="87.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="856" y="569.1641"/><rect fill="#FFFFFF" filter="url(#f7t77ld0ra1g4)" height="221.5391" style="stroke:#000000;stroke-width:2.0;" width="774" x="39" y="261.2266"/><rect fill="#FFFFFF" height="73.0703" style="stroke:none;stroke-width:1.0;" width="774" x="39" y="336.625"/><rect fill="#FFFFFF" height="73.0703" style="stroke:none;stroke-width:1.0;" width="774" x="39" y="409.6953"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="115" x2="115" y1="40.2969" y2="674.5625"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="373.5" x2="373.5" y1="40.2969" y2="674.5625"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="491.5" x2="491.5" y1="40.2969" y2="674.5625"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="639.5" x2="639.5" y1="40.2969" y2="674.5625"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="762" x2="762" y1="40.2969" y2="674.5625"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="861" x2="861" y1="40.2969" y2="674.5625"/><rect fill="#FEFECE" filter="url(#f7t77ld0ra1g4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="128" x="49" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="114" x="56" y="24.9951">ReturnController</text><rect fill="#FEFECE" filter="url(#f7t77ld0ra1g4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="128" x="49" y="673.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="114" x="56" y="693.5576">ReturnController</text><rect fill="#FEFECE" filter="url(#f7t77ld0ra1g4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="97" x="323.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="330.5" y="24.9951">LoanFacade</text><rect fill="#FEFECE" filter="url(#f7t77ld0ra1g4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="97" x="323.5" y="673.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="330.5" y="693.5576">LoanFacade</text><rect fill="#FEFECE" filter="url(#f7t77ld0ra1g4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="111" x="434.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="97" x="441.5" y="24.9951">ReturnFacade</text><rect fill="#FEFECE" filter="url(#f7t77ld0ra1g4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="111" x="434.5" y="673.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="97" x="441.5" y="693.5576">ReturnFacade</text><rect fill="#FEFECE" filter="url(#f7t77ld0ra1g4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="95" x="590.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="81" x="597.5" y="24.9951">DAOFactory</text><rect fill="#FEFECE" filter="url(#f7t77ld0ra1g4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="95" x="590.5" y="673.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="81" x="597.5" y="693.5576">DAOFactory</text><rect fill="#FEFECE" filter="url(#f7t77ld0ra1g4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="78" x="721" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="64" x="728" y="24.9951">LoanDAO</text><rect fill="#FEFECE" filter="url(#f7t77ld0ra1g4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="78" x="721" y="673.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="64" x="728" y="693.5576">LoanDAO</text><rect fill="#FEFECE" filter="url(#f7t77ld0ra1g4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="92" x="813" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="820" y="24.9951">ReturnDAO</text><rect fill="#FEFECE" filter="url(#f7t77ld0ra1g4)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="92" x="813" y="673.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="78" x="820" y="693.5576">ReturnDAO</text><rect fill="#FFFFFF" filter="url(#f7t77ld0ra1g4)" height="286.8047" style="stroke:#A80036;stroke-width:1.0;" width="10" x="757" y="158.8281"/><rect fill="#FFFFFF" filter="url(#f7t77ld0ra1g4)" height="87.3984" style="stroke:#A80036;stroke-width:1.0;" width="10" x="856" y="569.1641"/><polygon fill="#A80036" points="103,67.4297,113,71.4297,103,75.4297,107,71.4297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="0" x2="109" y1="71.4297" y2="71.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="7" y="66.3638">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="20" y="66.3638">returnItem()</text><polygon fill="#A80036" points="362,96.5625,372,100.5625,362,104.5625,366,100.5625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="115" x2="368" y1="100.5625" y2="100.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="122" y="95.4966">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="222" x="135" y="95.4966">getLatestLoanForItemId(int itemId)</text><polygon fill="#A80036" points="628,125.6953,638,129.6953,628,133.6953,632,129.6953" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="374" x2="634" y1="129.6953" y2="129.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="381" y="124.6294">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="394" y="124.6294">getLoanDAO()</text><polygon fill="#A80036" points="745,154.8281,755,158.8281,745,162.8281,749,158.8281" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="640" x2="751" y1="158.8281" y2="158.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="647" y="153.7622">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="660" y="153.7622">&lt;&lt;create&gt;&gt;</text><polygon fill="#A80036" points="651,183.9609,641,187.9609,651,191.9609,647,187.9609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="645" x2="756" y1="187.9609" y2="187.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="657" y="182.895">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="674" y="182.895"/><polygon fill="#A80036" points="385,213.0938,375,217.0938,385,221.0938,381,217.0938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="379" x2="639" y1="217.0938" y2="217.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="391" y="212.0278">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="60" x="404" y="212.0278">LoanDAO</text><polygon fill="#A80036" points="745,242.2266,755,246.2266,745,250.2266,749,246.2266" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="374" x2="751" y1="246.2266" y2="246.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="381" y="241.1606">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="218" x="394" y="241.1606">getLatestLoanByItemId(int itemId)</text><path d="M39,261.2266 L103,261.2266 L103,268.2266 L93,278.2266 L39,278.2266 L39,261.2266 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="221.5391" style="stroke:#000000;stroke-width:2.0;" width="774" x="39" y="261.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="54" y="274.2935">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="63" x="118" y="273.437">[succeed]</text><polygon fill="#A80036" points="385,295.4922,375,299.4922,385,303.4922,381,299.4922" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="379" x2="756" y1="299.4922" y2="299.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="391" y="294.4263">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="404" y="294.4263">Loan</text><polygon fill="#A80036" points="126,324.625,116,328.625,126,332.625,122,328.625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="120" x2="373" y1="328.625" y2="328.625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="132" y="323.5591">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="145" y="323.5591">Loan</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="39" x2="813" y1="337.625" y2="337.625"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="133" x="44" y="347.8354">[loan does not exist]</text><polygon fill="#A80036" points="385,368.5625,375,372.5625,385,376.5625,381,372.5625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="379" x2="756" y1="372.5625" y2="372.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="391" y="367.4966">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="142" x="413" y="367.4966">client not eligible error</text><polygon fill="#A80036" points="126,397.6953,116,401.6953,126,405.6953,122,401.6953" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="120" x2="373" y1="401.6953" y2="401.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="132" y="396.6294">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="142" x="154" y="396.6294">client not eligible error</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="39" x2="813" y1="410.6953" y2="410.6953"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="106" x="44" y="420.9058">[any other error]</text><polygon fill="#A80036" points="385,441.6328,375,445.6328,385,449.6328,381,445.6328" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="379" x2="761" y1="445.6328" y2="445.6328"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="391" y="440.5669">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="413" y="440.5669">internal error</text><polygon fill="#A80036" points="126,470.7656,116,474.7656,126,478.7656,122,474.7656" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="120" x2="373" y1="474.7656" y2="474.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="132" y="469.6997">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="154" y="469.6997">internal error</text><polygon fill="#A80036" points="480,506.8984,490,510.8984,480,514.8984,484,510.8984" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="115" x2="486" y1="510.8984" y2="510.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="122" y="505.8325">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146" x="144" y="505.8325">makeReturn(int loanId)</text><polygon fill="#A80036" points="628,536.0313,638,540.0313,628,544.0313,632,540.0313" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="492" x2="634" y1="540.0313" y2="540.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="499" y="534.9653">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="102" x="521" y="534.9653">getReturnDAO()</text><polygon fill="#A80036" points="844,565.1641,854,569.1641,844,573.1641,848,569.1641" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="640" x2="850" y1="569.1641" y2="569.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="647" y="564.0981">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="669" y="564.0981">&lt;&lt;create&gt;&gt;</text><polygon fill="#A80036" points="651,594.2969,641,598.2969,651,602.2969,647,598.2969" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="645" x2="855" y1="598.2969" y2="598.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="657" y="593.231">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="683" y="593.231"/><polygon fill="#A80036" points="503,623.4297,493,627.4297,503,631.4297,499,627.4297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="497" x2="639" y1="627.4297" y2="627.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="509" y="622.3638">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="71" x="531" y="622.3638">ReturnDAO</text><polygon fill="#A80036" points="849,652.5625,859,656.5625,849,660.5625,853,656.5625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="492" x2="855" y1="656.5625" y2="656.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="499" y="651.4966">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="521" y="651.4966">create(int loanId)</text><!--MD5=[52741f427572dda0ee42f5d762a0589a]
@startuml
autonumber

participant ReturnController
participant LoanFacade
participant ReturnFacade

-> ReturnController : returnItem()
ReturnController -> LoanFacade : getLatestLoanForItemId(int itemId)
LoanFacade -> DAOFactory : getLoanDAO()
DAOFactory -> LoanDAO ++ : <<create>>
LoanDAO -> DAOFactory
DAOFactory -> LoanFacade : LoanDAO
LoanFacade -> LoanDAO : getLatestLoanByItemId(int itemId)

alt succeed
  LoanDAO -> LoanFacade : Loan
  LoanFacade -> ReturnController : Loan
else loan does not exist
  LoanDAO -> LoanFacade: client not eligible error
  LoanFacade -> ReturnController: client not eligible error
else any other error
  LoanDAO -> LoanFacade: internal error
  deactivate LoanDAO
  LoanFacade -> ReturnController: internal error
end

ReturnController -> ReturnFacade : makeReturn(int loanId)
ReturnFacade -> DAOFactory : getReturnDAO()
DAOFactory -> ReturnDAO ++ : <<create>>
ReturnDAO -> DAOFactory
DAOFactory -> ReturnFacade : ReturnDAO
ReturnFacade -> ReturnDAO : create(int loanId)
deactivate ReturnDAO
@enduml

PlantUML version 1.2020.22(Sun Dec 06 09:36:27 UTC 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>